@using Haondt.Web.UI.Services
@using Odyssey.Client.Authentication.Models
@using Odyssey.UI.Authentication.Models
@using Odyssey.UI.Core.Services
@implements IValidationSummaryComponent
@inject NavigationManager Nav
@code {
    [Parameter]
    public Optional<string> ValidationSummary { get; set; }

    [Parameter]
    public bool IsValidation { get; set; }

    public const string Id = "register-panel";
}

<Frame
    Id="@Id"
    Gap="FrameSpacing.Card"
    Flex="FrameDirection.Col"
    Align="FrameAlignment.Stretch"
    AddClasses='"content-container-s"'>
    <p class="title text-align-center">Register</p>
    <form hx-post>
        <Frame Flex="FrameDirection.Col" Align="FrameAlignment.Stretch" Template="FrameTemplate.Card">
            <Field Id='"invite-code"' Title='"Invite code"' Name="@nameof(RegisterModel.InviteCode)" HxPreserve="true" />
            <Field Id='"username"' Title='"Username"' Name="@nameof(RegisterModel.Username)" Autocomplete='"username"' HxPreserve="true" />
            <Field Type="FieldType.Password" Title='"Password"' Name="@nameof(RegisterModel.Password)" Autocomplete='"new-password"' />
            <Field Type="FieldType.Password" Title='"Confirm password"' Name="@nameof(RegisterModel.ConfirmPassword)" Autocomplete='"new-password"' />
            @if(ValidationSummary.TryGetValue(out var formError))
            {
                <p class="validation-error">@formError</p>
            }
            <Frame Template="FrameTemplate.ButtonContainer">
                <Button
                    HxPushUrl='"true"'
                    HxGet="@Nav.ToAbsoluteUri(OdysseyRoutes.Auth.SignIn).ToString()"
                    Type='"button"' Style="ButtonStyle.Ghost" Color="ButtonColor.Text">I already have an account</Button>
                <Button Color="ButtonColor.Primary">Continue</Button>
            </Frame>
        </Frame>
    </form>
</Frame>
