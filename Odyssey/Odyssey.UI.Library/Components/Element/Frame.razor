@using System.Text
@code {
    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    [Parameter]
    public Optional<FrameDirection> Flex { get; set; }

    [Parameter]
    public Optional<FrameGrid> Grid { get; set; }

    [Parameter]
    public Optional<FrameJustification> Justify { get; set; }

    [Parameter]
    public Optional<FrameAlignment> Align { get; set; }

    [Parameter]
    public Optional<FrameGap> Gap { get; set; }

    [Parameter]
    public Optional<string> AddClasses { get; set; }

    private HashSet<string> _rootClasses = ["frame"];

    protected override void OnInitialized()
    {
        if(Flex.TryGetValue(out var flex))
        {
            _rootClasses.Add("frame-flex");
            if (flex.CssClass.TryGetValue(out var flexClass))
                _rootClasses.Add(flexClass);

            if (Justify.Bind(q => q.CssClass).TryGetValue(out var justificationClass))
                _rootClasses.Add(justificationClass);

            if(Align.Or(FrameAlignment.Center).CssClass.TryGetValue(out var alignmentClass))
                _rootClasses.Add(alignmentClass);

            if (Gap.Bind(q => q.CssClass).TryGetValue(out var gapClass))
                _rootClasses.Add(gapClass);
        }

        if (Grid.TryGetValue(out var grid))
        {
            _rootClasses.Add("frame-grid");
            if (grid.CssClass.TryGetValue(out var gridClass))
                _rootClasses.Add(gridClass);

            if (Gap.Bind(q => q.CssClass).TryGetValue(out var gapClass))
                _rootClasses.Add(gapClass);
        }

        if (AddClasses.TryGetValue(out var addClasses))
            _rootClasses.Add(addClasses);
    }
}

<div class="@string.Join(' ', _rootClasses)">
    @ChildContent
</div>
